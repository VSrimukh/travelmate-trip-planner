<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TravelMate - Flight Booking</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: url("project images/m1.jpg");
        min-height: 100vh;
      }

      .header {
        background: #008080;
        color: white;
        padding: 20px;
        text-align: center;
        position: relative;
      }

      .back-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      .flight-form {
        background: white;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .trip-type {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
      }

      .trip-option {
        flex: 1;
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
      }

      .trip-option.selected {
        border-color: #008080;
        background: #e8f5f5;
        color: #008080;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group label {
        margin-bottom: 8px;
        font-weight: bold;
        color: #333;
      }

      .form-group input,
      .form-group select {
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: #008080;
        box-shadow: 0 0 10px rgba(0, 128, 128, 0.1);
      }

      .location-input {
        position: relative;
      }

      .swap-btn {
        position: absolute;
        right: -15px;
        top: 50%;
        transform: translateY(-50%);
        background: #008080;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 18px;
        z-index: 10;
      }

      .search-btn {
        background: linear-gradient(45deg, #008080, #00a0a0);
        color: white;
        border: none;
        padding: 18px 40px;
        border-radius: 10px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        width: 100%;
        margin-top: 20px;
      }

      .search-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 128, 128, 0.3);
      }

      .search-results {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-top: 30px;
        display: none;
      }

      .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border: 2px solid #f0f0f0;
        border-radius: 10px;
        margin-bottom: 15px;
        transition: all 0.3s;
      }

      .result-item:hover {
        border-color: #008080;
        box-shadow: 0 2px 8px rgba(0, 128, 128, 0.1);
      }

      .flight-info {
        flex: 1;
      }

      .airline-name {
        font-size: 18px;
        font-weight: bold;
        color: #008080;
        margin-bottom: 5px;
      }

      .flight-route {
        color: #666;
        margin-bottom: 5px;
      }

      .flight-time {
        color: #333;
        font-weight: bold;
      }

      .flight-price {
        font-size: 24px;
        font-weight: bold;
        color: #28a745;
        margin-right: 20px;
      }

      .book-btn {
        background: #008080;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .book-btn:hover {
        background: #006666;
        transform: translateY(-2px);
      }

      .section-title {
        color: #008080;
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 20px;
        text-align: center;
      }

      @media (max-width: 768px) {
        .form-grid {
          grid-template-columns: 1fr;
        }

        .trip-type {
          flex-direction: column;
        }

        .result-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <a href="main.html" class="back-btn">← Back</a>
      <h1>Flight Booking</h1>
      <p>Find the best deals for flights</p>
    </div>

    <div class="container">
      <div class="flight-form">
        <div class="trip-type">
          <div class="trip-option selected" onclick="selectTripType('oneway')">
            <strong>One Way</strong>
          </div>
          <div class="trip-option" onclick="selectTripType('roundtrip')">
            <strong>Round Trip</strong>
          </div>
          <div class="trip-option" onclick="selectTripType('multicity')">
            <strong>Multi City</strong>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group location-input">
            <label for="from">From</label>
            <input
              type="text"
              id="from"
              placeholder="Departure city"
              list="airports"
            />
            <button
              class="swap-btn"
              onclick="swapLocations()"
              title="Swap locations"
            >
              ⇄
            </button>
          </div>

          <div class="form-group">
            <label for="to">To</label>
            <input
              type="text"
              id="to"
              placeholder="Destination city"
              list="airports"
            />
          </div>

          <div class="form-group">
            <label for="departure">Departure Date</label>
            <input type="date" id="departure" />
          </div>

          <div class="form-group" id="return-date-group" style="display: none">
            <label for="return">Return Date</label>
            <input type="date" id="return" />
          </div>

          <div class="form-group">
            <label for="passengers">Passengers</label>
            <select id="passengers">
              <option value="1">1 Adult</option>
              <option value="2">2 Adults</option>
              <option value="3">3 Adults</option>
              <option value="4">4 Adults</option>
              <option value="5">5+ Adults</option>
            </select>
          </div>

          <div class="form-group">
            <label for="class">Class</label>
            <select id="class">
              <option value="economy">Economy</option>
              <option value="premium">Premium Economy</option>
              <option value="business">Business</option>
              <option value="first">First Class</option>
            </select>
          </div>
        </div>

        <button class="search-btn" onclick="searchFlights()">
          Search Flights
        </button>
      </div>

      <div class="search-results" id="search-results">
        <div class="section-title">Available Flights</div>
        <div id="results-container"></div>
      </div>
    </div>

    <datalist id="airports">
      <option value="Mumbai (BOM)"></option>
      <option value="Delhi (DEL)"></option>
      <option value="Bangalore (BLR)"></option>
      <option value="Chennai (MAA)"></option>
      <option value="Kolkata (CCU)"></option>
      <option value="Hyderabad (HYD)"></option>
      <option value="Pune (PNQ)"></option>
      <option value="Ahmedabad (AMD)"></option>
      <option value="Jaipur (JAI)"></option>
      <option value="Goa (GOI)"></option>
      <option value="Kochi (COK)"></option>
      <option value="Lucknow (LKO)"></option>
    </datalist>

    <script src="booking-modal.js"></script>
    <script>
      let currentTripType = "oneway";

      function selectTripType(type) {
        document
          .querySelectorAll(".trip-option")
          .forEach((opt) => opt.classList.remove("selected"));
        event.target.classList.add("selected");

        currentTripType = type;

        const returnGroup = document.getElementById("return-date-group");
        if (type === "roundtrip") {
          returnGroup.style.display = "block";
        } else {
          returnGroup.style.display = "none";
        }
      }

      function swapLocations() {
        const fromField = document.getElementById("from");
        const toField = document.getElementById("to");

        const temp = fromField.value;
        fromField.value = toField.value;
        toField.value = temp;
      }

      function searchFlights() {
        const from = document.getElementById("from").value;
        const to = document.getElementById("to").value;
        const departure = document.getElementById("departure").value;
        const passengers = document.getElementById("passengers").value;
        const flightClass = document.getElementById("class").value;

        if (!from || !to || !departure) {
          alert(
            "Please fill in all required fields (From, To, and Departure Date)"
          );
          return;
        }

        const results = generateFlightResults(
          from,
          to,
          departure,
          passengers,
          flightClass
        );
        displayResults(results);

        alert(`Found ${results.length} flights for your search`);
      }

      function generateFlightResults(from, to, date, passengers, flightClass) {
        const airlines = [
          "IndiGo",
          "SpiceJet",
          "Air India",
          "Vistara",
          "GoAir",
          "AirAsia",
        ];
        const results = [];
        const basePrice =
          flightClass === "economy"
            ? 3000
            : flightClass === "premium"
            ? 5000
            : flightClass === "business"
            ? 12000
            : 25000;

        for (let i = 0; i < 6; i++) {
          const airline = airlines[i];
          const price = basePrice + Math.random() * 2000;
          const departureTime = `${6 + i}:${Math.random() > 0.5 ? "00" : "30"}`;
          const arrivalTime = `${8 + i}:${Math.random() > 0.5 ? "15" : "45"}`;
          const duration = `${1 + Math.floor(Math.random() * 3)}h ${
            15 + Math.floor(Math.random() * 45)
          }m`;

          results.push({
            id: `FL${Date.now()}_${i}`,
            airline: airline,
            from: from,
            to: to,
            departureTime: departureTime,
            arrivalTime: arrivalTime,
            duration: duration,
            price: Math.round(price),
            stops: Math.random() > 0.7 ? "1 Stop" : "Non-stop",
          });
        }

        return results.sort((a, b) => a.price - b.price);
      }

      function displayResults(results) {
        const container = document.getElementById("results-container");
        const searchResults = document.getElementById("search-results");

        container.innerHTML = "";

        results.forEach((flight) => {
          const resultItem = document.createElement("div");
          resultItem.className = "result-item";
          resultItem.innerHTML = `
          <div class="flight-info">
            <div class="airline-name">${flight.airline}</div>
            <div class="flight-route">${flight.from} → ${flight.to}</div>
            <div class="flight-time">${flight.departureTime} - ${
            flight.arrivalTime
          } • ${flight.duration} • ${flight.stops}</div>
          </div>
          <div class="flight-price">₹${flight.price.toLocaleString()}</div>
          <button class="book-btn" onclick="bookFlight('${flight.id}', '${
            flight.airline
          }', '${flight.price}', '${flight.from}', '${flight.to}', '${
            flight.departureTime
          }', '${flight.arrivalTime}')">
            Book Now
          </button>
        `;
          container.appendChild(resultItem);
        });

        searchResults.style.display = "block";
        searchResults.scrollIntoView({ behavior: "smooth" });
      }

      function bookFlight(
        id,
        airline,
        price,
        from,
        to,
        departureTime,
        arrivalTime
      ) {
        const flightData = {
          id: id,
          type: "flight",
          title: `${airline} Flight`,
          from: from,
          to: to,
          date: document.getElementById("departure").value,
          time: `${departureTime} - ${arrivalTime}`,
          price: `₹${price}`,
          airline: airline,
          departureTime: departureTime,
          arrivalTime: arrivalTime,
        };

        window.showBookingModal(flightData);
      }

      document.addEventListener("DOMContentLoaded", function () {
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("departure").min = today;
        document.getElementById("return").min = today;
      });
    </script>
  </body>
</html>
