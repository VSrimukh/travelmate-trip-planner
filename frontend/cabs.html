<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TravelMate - Cab Booking</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: url("project images/m1.jpg");
        min-height: 100vh;
      }

      .header {
        background: #008080;
        color: white;
        padding: 20px;
        text-align: center;
        position: relative;
      }

      .back-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      .booking-card {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .service-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #f0f0f0;
      }

      .service-icon {
        font-size: 48px;
        color: #008080;
      }

      .service-title {
        font-size: 28px;
        font-weight: bold;
        color: #008080;
      }

      .trip-type {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
      }

      .trip-option {
        flex: 1;
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
      }

      .trip-option.selected {
        border-color: #008080;
        background: #e8f5f5;
        color: #008080;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group label {
        margin-bottom: 8px;
        font-weight: bold;
        color: #333;
      }

      .form-group input,
      .form-group select {
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: #008080;
        box-shadow: 0 0 10px rgba(0, 128, 128, 0.1);
      }

      .location-input {
        position: relative;
      }

      .swap-btn {
        position: absolute;
        right: -15px;
        top: 50%;
        transform: translateY(-50%);
        background: #008080;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 18px;
        z-index: 10;
      }

      .search-btn {
        background: linear-gradient(45deg, #008080, #00a0a0);
        color: white;
        border: none;
        padding: 18px 40px;
        border-radius: 10px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        width: 100%;
      }

      .search-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 128, 128, 0.3);
      }

      .search-results {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-top: 30px;
        display: none;
      }

      .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border: 2px solid #f0f0f0;
        border-radius: 10px;
        margin-bottom: 15px;
        transition: all 0.3s;
      }

      .result-item:hover {
        border-color: #008080;
        box-shadow: 0 2px 8px rgba(0, 128, 128, 0.1);
      }

      .cab-info {
        flex: 1;
      }

      .cab-route {
        font-size: 18px;
        font-weight: bold;
        color: #008080;
        margin-bottom: 5px;
      }

      .cab-details {
        color: #666;
        font-size: 14px;
        margin-bottom: 5px;
      }

      .cab-price {
        font-size: 20px;
        font-weight: bold;
        color: #28a745;
        margin-right: 20px;
      }

      .book-btn {
        background: #008080;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .book-btn:hover {
        background: #006666;
        transform: translateY(-2px);
      }

      .section-title {
        color: #008080;
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 20px;
        text-align: center;
      }

      @media (max-width: 768px) {
        .form-grid {
          grid-template-columns: 1fr;
        }

        .trip-type {
          flex-direction: column;
        }

        .result-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <a href="main.html" class="back-btn">‚Üê Back</a>
      <h1>Cab Booking</h1>
      <p>Find the best deals for cabs</p>
    </div>

    <div class="container">
      <div class="booking-card">
        <div class="service-header">
          <div class="service-icon">üöó</div>
          <div class="service-title">Book Cabs</div>
        </div>

        <div class="trip-type">
          <div class="trip-option selected" onclick="selectCabType('oneway')">
            <strong>One Way</strong>
          </div>
          <div class="trip-option" onclick="selectCabType('roundtrip')">
            <strong>Round Trip</strong>
          </div>
          <div class="trip-option" onclick="selectCabType('local')">
            <strong>Local</strong>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group location-input">
            <label for="from">Pickup Location</label>
            <input
              type="text"
              id="from"
              placeholder="Pickup address"
              list="cities"
            />
            <button
              class="swap-btn"
              onclick="swapLocations()"
              title="Swap locations"
            >
              ‚áÑ
            </button>
          </div>

          <div class="form-group">
            <label for="to">Drop Location</label>
            <input
              type="text"
              id="to"
              placeholder="Drop address"
              list="cities"
            />
          </div>

          <div class="form-group">
            <label for="date">Pickup Date</label>
            <input type="date" id="date" />
          </div>

          <div class="form-group">
            <label for="time">Pickup Time</label>
            <input type="time" id="time" />
          </div>

          <div class="form-group">
            <label for="cartype">Car Type</label>
            <select id="cartype">
              <option value="hatchback">Hatchback</option>
              <option value="sedan">Sedan</option>
              <option value="suv">SUV</option>
              <option value="luxury">Luxury</option>
            </select>
          </div>
        </div>

        <button class="search-btn" onclick="searchCabs()">Search Cabs</button>
      </div>

      <div class="search-results" id="search-results">
        <div class="section-title">Available Cabs</div>
        <div id="results-container"></div>
      </div>
    </div>

    <datalist id="cities">
      <option value="Airport"></option>
      <option value="Railway Station"></option>
      <option value="Bus Stand"></option>
      <option value="City Center"></option>
      <option value="Hotel"></option>
      <option value="Mall"></option>
      <option value="Hospital"></option>
      <option value="Office Complex"></option>
    </datalist>

    <script src="booking-modal.js"></script>
    <script>
      let currentCabType = "oneway";

      function selectCabType(type) {
        document
          .querySelectorAll(".trip-option")
          .forEach((opt) => opt.classList.remove("selected"));
        event.target.classList.add("selected");
        currentCabType = type;
      }

      function swapLocations() {
        const fromField = document.getElementById("from");
        const toField = document.getElementById("to");

        const temp = fromField.value;
        fromField.value = toField.value;
        toField.value = temp;
      }

      function searchCabs() {
        const from = document.getElementById("from").value;
        const to = document.getElementById("to").value;
        const date = document.getElementById("date").value;
        const time = document.getElementById("time").value;

        if (!from || !to || !date || !time) {
          alert(
            "Please fill in all required fields (Pickup Location, Drop Location, Date, and Time)"
          );
          return;
        }

        showSearchResults(from, to, date, time);
        alert(`Found cabs for your trip from ${from} to ${to}`);
      }

      function showSearchResults(from, to, date, time) {
        const resultsContainer = document.getElementById("results-container");
        const searchResults = document.getElementById("search-results");

        const providers = [
          "Uber",
          "Ola",
          "Meru Cabs",
          "Easy Cabs",
          "Taxi For Sure",
        ];
        const results = [];

        for (let i = 0; i < 5; i++) {
          const provider = providers[i];
          const price = 300 + Math.random() * 500;
          const eta = `${5 + i * 2} mins`;

          results.push({
            id: `CB${Date.now()}_${i}`,
            provider: provider,
            route: `${from} ‚Üí ${to}`,
            eta: eta,
            duration: "45 mins",
            price: Math.round(price),
            date: date,
            time: time,
          });
        }

        resultsContainer.innerHTML = "";
        results.forEach((cab) => {
          const resultItem = document.createElement("div");
          resultItem.className = "result-item";
          resultItem.innerHTML = `
          <div class="cab-info">
            <div class="cab-route">${cab.route}</div>
            <div class="cab-details">${cab.provider} ‚Ä¢ ETA: ${cab.eta}</div>
            <div class="cab-details">${cab.duration} ‚Ä¢ ${new Date(
            cab.date
          ).toLocaleDateString()} ${cab.time}</div>
          </div>
          <div class="cab-price">‚Çπ${cab.price.toLocaleString()}</div>
          <button class="book-btn" onclick="bookCab('${cab.id}', '${
            cab.price
          }', '${from}', '${to}', '${date}', '${cab.provider}', '${time}')">
            Book Now
          </button>
        `;
          resultsContainer.appendChild(resultItem);
        });

        searchResults.style.display = "block";
        searchResults.scrollIntoView({ behavior: "smooth" });
      }

      function bookCab(id, price, from, to, date, provider, time) {
        const cabData = {
          id: id,
          type: "cab",
          title: `${provider} Cab`,
          from: from,
          to: to,
          date: date,
          time: time,
          price: `‚Çπ${price}`,
          provider: provider,
        };

        window.showBookingModal(cabData);
      }

      document.addEventListener("DOMContentLoaded", function () {
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("date").min = today;

        const now = new Date();
        const timeString =
          now.getHours().toString().padStart(2, "0") +
          ":" +
          now.getMinutes().toString().padStart(2, "0");
        document.getElementById("time").value = timeString;
      });
    </script>
  </body>
</html>
