<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TravelMate - Hotel Booking</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #f0f8ff 0%, #f8f9fa 100%);
        min-height: 100vh;
      }

      .header {
        background: #008080;
        color: white;
        padding: 20px;
        text-align: center;
        position: relative;
      }

      .back-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .search-card {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group label {
        margin-bottom: 8px;
        font-weight: bold;
        color: #333;
      }

      .form-group input,
      .form-group select {
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: #008080;
      }

      .filters-section {
        display: flex;
        gap: 20px;
        align-items: center;
        flex-wrap: wrap;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #eee;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }

      .filter-group label {
        font-size: 14px;
        color: #666;
      }

      .rating-filter {
        display: flex;
        gap: 10px;
      }

      .rating-btn {
        padding: 8px 15px;
        border: 2px solid #ddd;
        border-radius: 20px;
        background: white;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 14px;
      }

      .rating-btn.active {
        border-color: #008080;
        background: #008080;
        color: white;
      }

      .search-btn {
        background: linear-gradient(45deg, #008080, #00a0a0);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }

      .search-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 128, 128, 0.3);
      }

      .results-section {
        display: none;
      }

      .results-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .results-count {
        color: #666;
        font-size: 16px;
      }

      .sort-dropdown {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background: white;
      }

      .hotel-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
      }

      .hotel-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
      }

      .hotel-content {
        display: grid;
        grid-template-columns: 200px 1fr auto;
        gap: 20px;
        align-items: start;
      }

      .hotel-image {
        width: 200px;
        height: 150px;
        background: #f0f0f0;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        color: #ccc;
      }

      .hotel-info {
        flex: 1;
      }

      .hotel-name {
        font-size: 20px;
        font-weight: bold;
        color: #008080;
        margin-bottom: 8px;
      }

      .hotel-location {
        color: #666;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .hotel-rating {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
      }

      .stars {
        color: #ffc107;
        font-size: 18px;
      }

      .rating-score {
        background: #008080;
        color: white;
        padding: 4px 8px;
        border-radius: 5px;
        font-size: 14px;
        font-weight: bold;
      }

      .hotel-amenities {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin: 10px 0;
      }

      .amenity {
        background: #f8f9fa;
        padding: 4px 8px;
        border-radius: 15px;
        font-size: 12px;
        color: #666;
      }

      .hotel-pricing {
        text-align: right;
      }

      .original-price {
        text-decoration: line-through;
        color: #999;
        font-size: 14px;
      }

      .current-price {
        font-size: 24px;
        font-weight: bold;
        color: #28a745;
        margin: 5px 0;
      }

      .price-note {
        font-size: 12px;
        color: #666;
        margin-bottom: 15px;
      }

      .book-btn {
        background: #008080;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        width: 100%;
      }

      .book-btn:hover {
        background: #006666;
      }

      .nearby-section {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin-top: 20px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .section-title {
        color: #008080;
        font-size: 22px;
        font-weight: bold;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .nearby-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }

      .nearby-item {
        border: 1px solid #eee;
        border-radius: 10px;
        padding: 15px;
        transition: all 0.3s;
      }

      .nearby-item:hover {
        border-color: #008080;
        box-shadow: 0 2px 8px rgba(0, 128, 128, 0.1);
      }

      .nearby-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 10px;
      }

      .nearby-name {
        font-weight: bold;
        color: #333;
      }

      .nearby-distance {
        color: #008080;
        font-size: 14px;
      }

      .nearby-rating {
        display: flex;
        align-items: center;
        gap: 5px;
        margin-bottom: 8px;
      }

      .nearby-description {
        color: #666;
        font-size: 14px;
      }

      @media (max-width: 768px) {
        .hotel-content {
          grid-template-columns: 1fr;
          text-align: center;
        }

        .hotel-image {
          width: 100%;
          height: 200px;
        }

        .filters-section {
          flex-direction: column;
          align-items: stretch;
        }

        .rating-filter {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <a href="main.html" class="back-btn">‚Üê Back</a>
      <h1>Hotel Booking</h1>
      <p>Find the perfect stay for your journey</p>
    </div>

    <div class="container">
      <div class="search-card">
        <div class="form-grid">
          <div class="form-group">
            <label for="destination">Destination</label>
            <input
              type="text"
              id="destination"
              placeholder="Where are you going?"
              list="cities"
            />
          </div>

          <div class="form-group">
            <label for="checkin">Check-in Date</label>
            <input type="date" id="checkin" />
          </div>

          <div class="form-group">
            <label for="checkout">Check-out Date</label>
            <input type="date" id="checkout" />
          </div>

          <div class="form-group">
            <label for="guests">Guests</label>
            <select id="guests">
              <option value="1">1 Guest</option>
              <option value="2">2 Guests</option>
              <option value="3">3 Guests</option>
              <option value="4">4 Guests</option>
              <option value="5">5+ Guests</option>
            </select>
          </div>
        </div>

        <div class="filters-section">
          <div class="filter-group">
            <label>Price Range</label>
            <select id="priceRange">
              <option value="">Any Price</option>
              <option value="budget">‚Çπ0 - ‚Çπ2,000</option>
              <option value="mid">‚Çπ2,000 - ‚Çπ5,000</option>
              <option value="luxury">‚Çπ5,000+</option>
            </select>
          </div>

          <div class="filter-group">
            <label>Star Rating</label>
            <div class="rating-filter">
              <div class="rating-btn" onclick="toggleRating(3)">3‚òÖ+</div>
              <div class="rating-btn" onclick="toggleRating(4)">4‚òÖ+</div>
              <div class="rating-btn active" onclick="toggleRating(5)">5‚òÖ</div>
            </div>
          </div>

          <div class="filter-group">
            <label>Hotel Type</label>
            <select id="hotelType">
              <option value="">All Types</option>
              <option value="hotel">Hotel</option>
              <option value="resort">Resort</option>
              <option value="apartment">Apartment</option>
              <option value="villa">Villa</option>
            </select>
          </div>

          <button class="search-btn" onclick="searchHotels()">
            Search Hotels
          </button>
        </div>
      </div>

      <div class="results-section" id="results-section">
        <div class="results-header">
          <div class="results-count" id="results-count">Found 24 hotels</div>
          <select class="sort-dropdown" id="sortBy" onchange="sortResults()">
            <option value="recommended">Recommended</option>
            <option value="price-low">Price: Low to High</option>
            <option value="price-high">Price: High to Low</option>
            <option value="rating">Rating: High to Low</option>
            <option value="distance">Distance</option>
          </select>
        </div>

        <div id="hotels-container">
       
        </div>

        <div class="nearby-section">
          <div class="section-title">
            <span>üìç</span>
            Nearby Attractions & Restaurants
          </div>
          <div class="nearby-grid" id="nearby-container">
            <!-- Nearby places will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <datalist id="cities">
      <option value="Mumbai"></option>
      <option value="Delhi"></option>
      <option value="Bangalore"></option>
      <option value="Chennai"></option>
      <option value="Kolkata"></option>
      <option value="Hyderabad"></option>
      <option value="Pune"></option>
      <option value="Goa"></option>
      <option value="Jaipur"></option>
      <option value="Kerala"></option>
      <option value="Agra"></option>
      <option value="Udaipur"></option>
    </datalist>

    <script>
      let selectedRating = 5;
      let currentHotels = [];

      function toggleRating(rating) {
        document
          .querySelectorAll(".rating-btn")
          .forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");
        selectedRating = rating;
      }

      function searchHotels() {
        const destination = document.getElementById("destination").value;
        const checkin = document.getElementById("checkin").value;
        const checkout = document.getElementById("checkout").value;
        const guests = document.getElementById("guests").value;

        if (!destination || !checkin || !checkout) {
          alert("Please fill in all required fields");
          return;
        }

        currentHotels = generateHotelData(destination);
        displayHotels(currentHotels);
        displayNearbyPlaces(destination);

        document.getElementById("results-section").style.display = "block";
        document
          .getElementById("results-section")
          .scrollIntoView({ behavior: "smooth" });
      }

      function generateHotelData(destination) {
        const hotelNames = [
          "Grand Palace Hotel",
          "Luxury Resort & Spa",
          "Business Inn",
          "Heritage Hotel",
          "Modern Suites",
          "Boutique Hotel",
          "Royal Residency",
          "Comfort Inn",
          "Premium Plaza",
          "Garden View Hotel",
          "City Center Hotel",
          "Riverside Resort",
        ];

        const amenities = [
          ["WiFi", "Pool", "Gym", "Spa"],
          ["WiFi", "Restaurant", "Bar", "Parking"],
          ["WiFi", "Business Center", "Gym"],
          ["WiFi", "Pool", "Restaurant", "Heritage Tours"],
          ["WiFi", "Kitchenette", "Gym", "Laundry"],
          ["WiFi", "Restaurant", "Concierge"],
          ["WiFi", "Pool", "Spa", "Fine Dining"],
          ["WiFi", "Restaurant", "Parking"],
          ["WiFi", "Pool", "Business Center", "Restaurant"],
          ["WiFi", "Garden", "Restaurant"],
          ["WiFi", "Restaurant", "City Tours"],
          ["WiFi", "Pool", "Water Sports", "Spa"],
        ];

        return hotelNames.map((name, index) => {
          const basePrice = 1500 + Math.random() * 8000;
          const rating = 3 + Math.random() * 2;
          const discount =
            Math.random() > 0.5 ? 10 + Math.floor(Math.random() * 30) : 0;

          return {
            id: `hotel_${index}`,
            name: name,
            location: `${destination} City Center`,
            rating: rating,
            reviewCount: 150 + Math.floor(Math.random() * 500),
            originalPrice: Math.round(basePrice),
            currentPrice: Math.round(basePrice * (1 - discount / 100)),
            discount: discount,
            amenities: amenities[index],
            distance: (Math.random() * 5).toFixed(1),
            starRating: Math.floor(rating) + 1,
          };
        });
      }

      function displayHotels(hotels) {
        const container = document.getElementById("hotels-container");
        const priceRange = document.getElementById("priceRange").value;
        const hotelType = document.getElementById("hotelType").value;

        // Filter hotels
        let filteredHotels = hotels.filter((hotel) => {
          const meetsRating = hotel.starRating >= selectedRating;
          const meetsPrice =
            !priceRange ||
            (priceRange === "budget" && hotel.currentPrice <= 2000) ||
            (priceRange === "mid" &&
              hotel.currentPrice > 2000 &&
              hotel.currentPrice <= 5000) ||
            (priceRange === "luxury" && hotel.currentPrice > 5000);

          return meetsRating && meetsPrice;
        });

        document.getElementById(
          "results-count"
        ).textContent = `Found ${filteredHotels.length} hotels`;

        container.innerHTML = "";
        filteredHotels.forEach((hotel) => {
          const hotelCard = document.createElement("div");
          hotelCard.className = "hotel-card";

          const stars =
            "‚òÖ".repeat(hotel.starRating) + "‚òÜ".repeat(5 - hotel.starRating);

          hotelCard.innerHTML = `
          <div class="hotel-content">
            <div class="hotel-image">üè®</div>
            <div class="hotel-info">
              <div class="hotel-name">${hotel.name}</div>
              <div class="hotel-location">üìç ${hotel.location} ‚Ä¢ ${
            hotel.distance
          } km from center</div>
              <div class="hotel-rating">
                <span class="stars">${stars}</span>
                <span class="rating-score">${hotel.rating.toFixed(1)}</span>
                <span style="color: #666; font-size: 14px;">(${
                  hotel.reviewCount
                } reviews)</span>
              </div>
              <div class="hotel-amenities">
                ${hotel.amenities
                  .map((amenity) => `<span class="amenity">${amenity}</span>`)
                  .join("")}
              </div>
            </div>
            <div class="hotel-pricing">
              ${
                hotel.discount > 0
                  ? `<div class="original-price">‚Çπ${hotel.originalPrice.toLocaleString()}</div>`
                  : ""
              }
              <div class="current-price">‚Çπ${hotel.currentPrice.toLocaleString()}</div>
              <div class="price-note">per night + taxes</div>
              ${
                hotel.discount > 0
                  ? `<div style="color: #28a745; font-size: 12px; margin-bottom: 10px;">${hotel.discount}% OFF</div>`
                  : ""
              }
              <button class="book-btn" onclick="bookHotel('${hotel.id}', '${
            hotel.name
          }', ${hotel.currentPrice})">
                Book Now
              </button>
            </div>
          </div>
        `;

          container.appendChild(hotelCard);
        });
      }

      function displayNearbyPlaces(destination) {
        const nearbyPlaces = [
          {
            name: "City Mall Shopping Center",
            type: "Shopping",
            distance: "0.5 km",
            rating: 4.2,
            description:
              "Large shopping mall with restaurants, cinema, and retail stores",
          },
          {
            name: "Heritage Museum",
            type: "Attraction",
            distance: "1.2 km",
            rating: 4.5,
            description:
              "Historical museum showcasing local culture and artifacts",
          },
          {
            name: "Spice Garden Restaurant",
            type: "Restaurant",
            distance: "0.3 km",
            rating: 4.3,
            description: "Authentic local cuisine with traditional recipes",
          },
          {
            name: "Central Park",
            type: "Park",
            distance: "0.8 km",
            rating: 4.0,
            description:
              "Beautiful park perfect for morning walks and evening relaxation",
          },
          {
            name: "Night Market",
            type: "Shopping",
            distance: "1.0 km",
            rating: 4.4,
            description:
              "Vibrant night market with street food and local handicrafts",
          },
          {
            name: "Rooftop Cafe",
            type: "Restaurant",
            distance: "0.7 km",
            rating: 4.1,
            description:
              "Trendy rooftop cafe with city views and international cuisine",
          },
        ];

        const container = document.getElementById("nearby-container");
        container.innerHTML = "";

        nearbyPlaces.forEach((place) => {
          const placeItem = document.createElement("div");
          placeItem.className = "nearby-item";

          const typeIcons = {
            Shopping: "üõç",
            Restaurant: "üçΩ",
            Attraction: "üèõ",
            Park: "üå≥",
          };

          placeItem.innerHTML = `
          <div class="nearby-header">
            <div class="nearby-name">${typeIcons[place.type]} ${
            place.name
          }</div>
            <div class="nearby-distance">${place.distance}</div>
          </div>
          <div class="nearby-rating">
            <span class="stars">${"‚òÖ".repeat(
              Math.floor(place.rating)
            )}${"‚òÜ".repeat(5 - Math.floor(place.rating))}</span>
            <span>${place.rating}</span>
          </div>
          <div class="nearby-description">${place.description}</div>
        `;

          container.appendChild(placeItem);
        });
      }

      function sortResults() {
        const sortBy = document.getElementById("sortBy").value;

        let sortedHotels = [...currentHotels];

        switch (sortBy) {
          case "price-low":
            sortedHotels.sort((a, b) => a.currentPrice - b.currentPrice);
            break;
          case "price-high":
            sortedHotels.sort((a, b) => b.currentPrice - a.currentPrice);
            break;
          case "rating":
            sortedHotels.sort((a, b) => b.rating - a.rating);
            break;
          case "distance":
            sortedHotels.sort(
              (a, b) => parseFloat(a.distance) - parseFloat(b.distance)
            );
            break;
          default:
            break;
        }

        displayHotels(sortedHotels);
      }

      function bookHotel(hotelId, hotelName, price) {
        const user = JSON.parse(
          localStorage.getItem("travelmate_current_user") || "null"
        );

        if (!user) {
          alert("Please login to book hotels");
          window.location.href = "login.html";
          return;
        }

        const checkin = document.getElementById("checkin").value;
        const checkout = document.getElementById("checkout").value;
        const destination = document.getElementById("destination").value;

        const booking = {
          id: `BK${Date.now()}`,
          userId: user.id,
          type: "hotel",
          title: `${hotelName} in ${destination}`,
          hotelName: hotelName,
          destination: destination,
          checkinDate: checkin,
          checkoutDate: checkout,
          date: new Date().toISOString(),
          price: `‚Çπ${price}`,
          status: "confirmed",
        };

        const bookings = JSON.parse(
          localStorage.getItem("travelmate_bookings") || "[]"
        );
        bookings.push(booking);
        localStorage.setItem("travelmate_bookings", JSON.stringify(bookings));

        alert(
          `üéâ Hotel Booked Successfully!\n\nBooking ID: ${
            booking.id
          }\nHotel: ${hotelName}\nCheck-in: ${new Date(
            checkin
          ).toLocaleDateString()}\nCheck-out: ${new Date(
            checkout
          ).toLocaleDateString()}\nPrice: ‚Çπ${price}\n\nYou can view your booking in Upcoming section.`
        );

        setTimeout(() => {
          window.location.href = `ticket.html?id=${booking.id}&type=hotel`;
        }, 2000);
      }

      document.addEventListener("DOMContentLoaded", function () {
        const today = new Date().toISOString().split("T")[0];
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);

        document.getElementById("checkin").min = today;
        document.getElementById("checkout").min = tomorrow
          .toISOString()
          .split("T")[0];

        document.getElementById("checkin").value = today;
        document.getElementById("checkout").value = tomorrow
          .toISOString()
          .split("T")[0];
      });
    </script>
  </body>
</html>
